!function(factory){"function"==typeof define&&define.amd?define(["jquery"],factory):"object"==typeof module&&module.exports?module.exports=function(root,jQuery){return void 0===jQuery&&(jQuery="undefined"!=typeof window?require("jquery"):require("jquery")(root)),factory(jQuery),jQuery}:factory(jQuery)}((function($){return $.fn.tilt=function(options){const requestTick=function(){this.ticking||(requestAnimationFrame(updateTransforms.bind(this)),this.ticking=!0)},bindEvents=function(){const _this=this;$(this).on("mousemove",mouseMove),$(this).on("mouseenter",mouseEnter),this.settings.reset&&$(this).on("mouseleave",mouseLeave),this.settings.glare&&$(window).on("resize",updateGlareSize.bind(this))},setTransition=function(){void 0!==this.timeout&&clearTimeout(this.timeout),$(this).css({transition:`${this.settings.speed}ms ${this.settings.easing}`}),this.settings.glare&&this.glareElement.css({transition:`opacity ${this.settings.speed}ms ${this.settings.easing}`}),this.timeout=setTimeout(()=>{$(this).css({transition:""}),this.settings.glare&&this.glareElement.css({transition:""})},this.settings.speed)},mouseEnter=function(event){this.ticking=!1,$(this).css({"will-change":"transform"}),setTransition.call(this),$(this).trigger("tilt.mouseEnter")},getMousePositions=function(event){return void 0===event&&(event={pageX:$(this).offset().left+$(this).outerWidth()/2,pageY:$(this).offset().top+$(this).outerHeight()/2}),{x:event.pageX,y:event.pageY}},mouseMove=function(event){this.mousePositions=getMousePositions(event),requestTick.call(this)},mouseLeave=function(){setTransition.call(this),this.reset=!0,requestTick.call(this),$(this).trigger("tilt.mouseLeave")},getValues=function(){const width=$(this).outerWidth(),height=$(this).outerHeight(),left=$(this).offset().left,top=$(this).offset().top,percentageX=(this.mousePositions.x-left)/width,percentageY=(this.mousePositions.y-top)/height,tiltX=(this.settings.maxTilt/2-percentageX*this.settings.maxTilt).toFixed(2),tiltY=(percentageY*this.settings.maxTilt-this.settings.maxTilt/2).toFixed(2),angle=Math.atan2(this.mousePositions.x-(left+width/2),-(this.mousePositions.y-(top+height/2)))*(180/Math.PI);return{tiltX:tiltX,tiltY:tiltY,percentageX:100*percentageX,percentageY:100*percentageY,angle:angle}},updateTransforms=function(){if(this.transforms=getValues.call(this),this.reset)return this.reset=!1,$(this).css("transform",`perspective(${this.settings.perspective}px) rotateX(0deg) rotateY(0deg)`),void(this.settings.glare&&(this.glareElement.css("transform","rotate(180deg) translate(-50%, -50%)"),this.glareElement.css("opacity","0")));$(this).css("transform",`perspective(${this.settings.perspective}px) rotateX(${"x"===this.settings.disableAxis?0:this.transforms.tiltY}deg) rotateY(${"y"===this.settings.disableAxis?0:this.transforms.tiltX}deg) scale3d(${this.settings.scale},${this.settings.scale},${this.settings.scale})`),this.settings.glare&&(this.glareElement.css("transform",`rotate(${this.transforms.angle}deg) translate(-50%, -50%)`),this.glareElement.css("opacity",`${this.transforms.percentageY*this.settings.maxGlare/100}`)),$(this).trigger("change",[this.transforms]),this.ticking=!1},prepareGlare=function(){const glarePrerender=this.settings.glarePrerender;if(glarePrerender||$(this).append('<div class="js-tilt-glare"><div class="js-tilt-glare-inner"></div></div>'),this.glareElementWrapper=$(this).find(".js-tilt-glare"),this.glareElement=$(this).find(".js-tilt-glare-inner"),glarePrerender)return;const stretch={position:"absolute",top:"0",left:"0",width:"100%",height:"100%"};this.glareElementWrapper.css(stretch).css({overflow:"hidden","pointer-events":"none"}),this.glareElement.css({position:"absolute",top:"50%",left:"50%","background-image":"linear-gradient(0deg, rgba(255,255,255,0) 0%, rgba(255,255,255,1) 100%)",width:`${2*$(this).outerWidth()}`,height:`${2*$(this).outerWidth()}`,transform:"rotate(180deg) translate(-50%, -50%)","transform-origin":"0% 0%",opacity:"0"})},updateGlareSize=function(){this.glareElement.css({width:`${2*$(this).outerWidth()}`,height:`${2*$(this).outerWidth()}`})};return $.fn.tilt.destroy=function(){$(this).each((function(){$(this).find(".js-tilt-glare").remove(),$(this).css({"will-change":"",transform:""}),$(this).off("mousemove mouseenter mouseleave")}))},$.fn.tilt.getValues=function(){const results=[];return $(this).each((function(){this.mousePositions=getMousePositions.call(this),results.push(getValues.call(this))})),results},$.fn.tilt.reset=function(){$(this).each((function(){this.mousePositions=getMousePositions.call(this),this.settings=$(this).data("settings"),mouseLeave.call(this),setTimeout(()=>{this.reset=!1},this.settings.transition)}))},this.each((function(){this.settings=$.extend({maxTilt:$(this).is("[data-tilt-max]")?$(this).data("tilt-max"):20,perspective:$(this).is("[data-tilt-perspective]")?$(this).data("tilt-perspective"):300,easing:$(this).is("[data-tilt-easing]")?$(this).data("tilt-easing"):"cubic-bezier(.03,.98,.52,.99)",scale:$(this).is("[data-tilt-scale]")?$(this).data("tilt-scale"):"1",speed:$(this).is("[data-tilt-speed]")?$(this).data("tilt-speed"):"400",transition:!$(this).is("[data-tilt-transition]")||$(this).data("tilt-transition"),disableAxis:$(this).is("[data-tilt-disable-axis]")?$(this).data("tilt-disable-axis"):null,axis:$(this).is("[data-tilt-axis]")?$(this).data("tilt-axis"):null,reset:!$(this).is("[data-tilt-reset]")||$(this).data("tilt-reset"),glare:!!$(this).is("[data-tilt-glare]")&&$(this).data("tilt-glare"),maxGlare:$(this).is("[data-tilt-maxglare]")?$(this).data("tilt-maxglare"):1},options),null!==this.settings.axis&&(console.warn("Tilt.js: the axis setting has been renamed to disableAxis. See https://github.com/gijsroge/tilt.js/pull/26 for more information"),this.settings.disableAxis=this.settings.axis),this.init=()=>{$(this).data("settings",this.settings),this.settings.glare&&prepareGlare.call(this),bindEvents.call(this)},this.init()}))},$("[data-tilt]").tilt(),!0}));